{% extends 'base.html' %}
{% load static %}

{% block 'title' %}
Painel do Afiliado
{% endblock %}

{% block 'body' %}

<h2>Seu Saldo: R$ {{ affiliate.total_commission }}</h2>

<form method="post">
    {% csrf_token %}
    <label for="amount">Valor do Saque:</label>
    <input type="number" name="amount" step="0.01" required>
    <button type="submit">Solicitar Saque</button>
</form>

<p>Seu link de indicação: <a href="{{ affiliate.referral_link }}" target="_blank">{{ affiliate.referral_link }}</a></p>

<h3>Histórico de Saques</h3>
<hr>
<table class="table table-striped text-center">
    <thead>
      <tr>
        <th scope="col">Valor</th>
        <th scope="col">Status</th>
        <th scope="col">Data</th>
        <th scope="col">Ação</th>
      </tr>
    </thead>
    <tbody>
        {% for withdrawal in affiliate.withdrawal_set.all %}
        <tr>
            <td>R$ {{ withdrawal.amount }}</td>
            <td>{{ withdrawal.status }}</td>
            <td>{{ withdrawal.requested_at }}</td>
            <td>
                {% if withdrawal.status == "Pendente" %}
                <span style="color: rgb(5, 5, 5);"class="badge badge-warning">Aguardando aprovação</span>
                {% else %}
                <span class="text-muted">Finalizado</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock %}
